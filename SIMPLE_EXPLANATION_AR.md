# ุดุฑุญ ุจุณูุท - ููู ูุนูู ูุธุงู ุชุนุฏุฏ ุงูุนูุงุฏุงุช

## ๐ฏ ุงูููุฑุฉ ุงูุฃุณุงุณูุฉ

### ูุจู (ูุธุงู ูุงุญุฏ):

```
ูุงุนุฏุฉ ุจูุงูุงุช ูุงุญุฏุฉ: smartclinic
- ุฌุฏูู ุงููุฑุถู (ุฌููุน ุงูุนูุงุฏุงุช ูุฎุชูุทุฉ)
  โโ patient_1 (clinic_id = 1)
  โโ patient_2 (clinic_id = 2)
  โโ patient_3 (clinic_id = 1)
```

โ **ูุดููุฉ:** ูู ุงูุนูุงุฏุงุช ูู ูุงุนุฏุฉ ูุงุญุฏุฉุ ูููุชุฑ ุจู `clinic_id`

### ุจุนุฏ (ูุธุงู ูุชุนุฏุฏ):

```
ูุงุนุฏุฉ ูุฑูุฒูุฉ: smartclinic_tenants
- ุฌุฏูู tenants (ูุนูููุงุช ุงูุนูุงุฏุงุช ููุท)

ูุงุนุฏุฉ ุนูุงุฏุฉ ุงูุฃูู: tenant_clinic_amal
- ุฌุฏูู ุงููุฑุถู (ูุฑุถู ุนูุงุฏุฉ ุงูุฃูู ููุท)
- ุฌุฏูู ุงูุญุงูุงุช (ุญุงูุงุช ุนูุงุฏุฉ ุงูุฃูู ููุท)

ูุงุนุฏุฉ ุนูุงุฏุฉ ุงูููุฑ: tenant_clinic_noor
- ุฌุฏูู ุงููุฑุถู (ูุฑุถู ุนูุงุฏุฉ ุงูููุฑ ููุท)
- ุฌุฏูู ุงูุญุงูุงุช (ุญุงูุงุช ุนูุงุฏุฉ ุงูููุฑ ููุท)
```

โ **ุงูุญู:** ูู ุนูุงุฏุฉ ูุงุนุฏุฉ ุจูุงูุงุช ูููุตูุฉ ุชูุงูุงู!

---

## ๐ ููุงุนุฏ ุงูุจูุงูุงุช

### 1. ุงููุงุนุฏุฉ ุงููุฑูุฒูุฉ (smartclinic_tenants)

**ุงูุฌุฏุงูู (6 ููุท):**

- `tenants` - ูุนูููุงุช ุงูุนูุงุฏุงุช
- `domains` - ูุทุงูุงุช ุงูุนูุงุฏุงุช
- `users` - ุงููุฏุฑุงุก ุงููุฑูุฒููู
- `cache`, `jobs`, `sessions` - ุฌุฏุงูู Laravel

**ุงูุบุฑุถ:** ุฅุฏุงุฑุฉ ุงูุนูุงุฏุงุช ููุท

### 2. ููุงุนุฏ ุจูุงูุงุช ุงูุนูุงุฏุงุช (ูู ุนูุงุฏุฉ ูููุตูุฉ)

**ูุซุงู:** `tenant_clinic_amal`

**ุงูุฌุฏุงูู (20+ ุฌุฏูู):**

- `users` - ุงูุฃุทุจุงุก ูุงูููุธููู
- `patients` - ุงููุฑุถู
- `cases` - ุงูุญุงูุงุช ุงูุทุจูุฉ
- `bills` - ุงูููุงุชูุฑ
- `reservations` - ุงูุญุฌูุฒุงุช
- `recipes` - ุงููุตูุงุช
- `notes` - ุงูููุงุญุธุงุช
- `images` - ุงูุตูุฑ ุงูุทุจูุฉ
- `clinic_settings` - ุฅุนุฏุงุฏุงุช ุงูุนูุงุฏุฉ
- `clinic_expenses` - ุงููุตุฑููุงุช
- ูุฌุฏุงูู ุฃุฎุฑู...

**ุงูุบุฑุถ:** ุจูุงูุงุช ุงูุนูุงุฏุฉ ุงููุงููุฉ

---

## ๐ ููู ูุนูู ุงููุธุงูุ

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุนูุงุฏุฉ ุฌุฏูุฏุฉ

```bash
POST /api/tenants
{
  "name": "ุนูุงุฏุฉ ุงูุฃูู",
  "address": "ุจุบุฏุงุฏ"
}
```

**ูุง ูุญุฏุซ ุชููุงุฆูุงู:**

1. โ ููุญูุธ ุงูุณุฌู ูู ุฌุฏูู `tenants` (ุงููุงุนุฏุฉ ุงููุฑูุฒูุฉ)
2. โ ูููุดุฃ ูุงุนุฏุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ: `tenant_clinic_amal_xxx`
3. โ ุชูุดุบูู ุฌููุน ุงูุชุฑุญููุงุช (16 ููู)
4. โ ุชูุดุบูู ุงูุจุฐูุฑ ุงูุฃุณุงุณูุฉ (ุฃุฏูุงุฑุ ุตูุงุญูุงุชุ ุชุตูููุงุช)

### ุงูุฎุทูุฉ 2: ุงุณุชุฎุฏุงู ุงูุนูุงุฏุฉ

```bash
# ุชุณุฌูู ุฏุฎูู ูู ุนูุงุฏุฉ ุงูุฃูู
POST /api/tenant/auth/login
Headers:
  X-Tenant-ID: clinic_amal_xxx  โ ููู ุฌุฏุงู!
Body:
{
  "email": "doctor@amal.com",
  "password": "password"
}
```

**ูุง ูุญุฏุซ:**

1. Middleware ููุฑุฃ `X-Tenant-ID`
2. ูุจุญุซ ุนู ุงูุนูุงุฏุฉ ูู ุงููุงุนุฏุฉ ุงููุฑูุฒูุฉ
3. **ููุจุฏูู ุงูุงุชุตุงู** ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช ุงูุนูุงุฏุฉ
4. ูู ุงูุนูููุงุช ุชููููุฐ ูู ูุงุนุฏุฉ ุงูุนูุงุฏุฉ

### ุงูุฎุทูุฉ 3: ุฅุถุงูุฉ ูุฑูุถ

```bash
POST /api/tenant/patients
Headers:
  X-Tenant-ID: clinic_amal_xxx
  Authorization: Bearer {token}
Body:
{
  "name": "ุฃุญูุฏ ูุญูุฏ",
  "phone": "07701234567"
}
```

**ุฃูู ููุญูุธุ**

- ูุงุนุฏุฉ ุงูุจูุงูุงุช: `tenant_clinic_amal_xxx`
- ุงูุฌุฏูู: `patients`
- โ ูุนุฒูู ุชูุงูุงู ุนู ุงูุนูุงุฏุงุช ุงูุฃุฎุฑู!

---

## ๐จ ูุซุงู ูุฑุฆู

```
ุทูุจ API:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ POST /api/tenant/patients  โ
โ X-Tenant-ID: clinic_amal    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ
     [Middleware ููุญุต]
              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ุงููุงุนุฏุฉ ุงููุฑูุฒูุฉ          โ
โ   โ clinic_amal ููุฌูุฏุฉ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ
      [ูุจุฏูู ุงูุงุชุตุงู]
              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   tenant_clinic_amal         โ
โ   โ ูุญูุธ ูู patients        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โจ ุงูููุงุฆุฏ

| ุงูููุฒุฉ                 | ุงูุดุฑุญ                                 |
| ---------------------- | ------------------------------------- |
| ๐ **ุงูุฃูุงู**          | ุงุฎุชุฑุงู ุนูุงุฏุฉ ูุงุญุฏุฉ ูุง ูุคุซุฑ ุนูู ุงูุจููุฉ |
| โก **ุงูุฃุฏุงุก**          | ุงุณุชุนูุงูุงุช ุฃุณุฑุน (ุจูุงูุงุช ุฃูู)           |
| ๐พ **ุงููุณุฎ ุงูุงุญุชูุงุทู** | ูุณุฎ ุงุญุชูุงุทู ูุนูุงุฏุฉ ูุงุญุฏุฉ ููุท          |
| ๐ฏ **ุงูุชุฎุตูุต**         | ูู ุนูุงุฏุฉ ูููู ุชุฎุตูุต ุฌุฏุงูููุง           |
| ๐ **ุงูุชูุณุน**          | ุชูุฒูุน ุงูุนูุงุฏุงุช ุนูู ุณูุฑูุฑุงุช ูุฎุชููุฉ     |

---

## ๐ ุงูุชุฑุญููุงุช

### ุงูุชุฑุญููุงุช ุงููุฑูุฒูุฉ (6 ูููุงุช)

```
database/migrations/
โโโ create_users_table.php
โโโ create_cache_table.php
โโโ create_jobs_table.php
โโโ create_tenants_table.php        โ ูุนูููุงุช ุงูุนูุงุฏุงุช
โโโ create_domains_table.php
โโโ create_setting_definitions_table.php
```

### ุชุฑุญููุงุช ุงูุนูุงุฏุงุช (16 ููู)

```
database/migrations/tenant/
โโโ create_users_table.php          โ ููุธูู ุงูุนูุงุฏุฉ
โโโ create_patients_table.php       โ ูุฑุถู ุงูุนูุงุฏุฉ
โโโ create_cases_table.php          โ ุญุงูุงุช ุงูุนูุงุฏุฉ
โโโ create_bills_table.php          โ ููุงุชูุฑ ุงูุนูุงุฏุฉ
โโโ ... (12 ููู ุขุฎุฑ)
```

**ุงููุฑู:**

- ุงููุฑูุฒูุฉ: ุชูุดุบูู ูุฑุฉ ูุงุญุฏุฉ ููุท
- ุงูุนูุงุฏุงุช: ุชูุดุบูู ููู ุนูุงุฏุฉ ุฌุฏูุฏุฉ

---

## ๐ ุฎุทูุงุช ุงูุจุฏุก

### 1. ุชุดุบูู ุงูุชุฑุญููุงุช ุงููุฑูุฒูุฉ

```bash
php artisan migrate
```

### 2. ุฅูุดุงุก ุฃูู ุนูุงุฏุฉ

```bash
POST /api/tenants
{
  "name": "ุนูุงุฏุฉ ุงูุฃูู",
  "address": "ุจุบุฏุงุฏ"
}
```

### 3. ุชุณุฌูู ุฏุฎูู ุทุจูุจ

```bash
POST /api/tenant/auth/register
Header: X-Tenant-ID: clinic_xxx
{
  "name": "ุฏ. ุฃุญูุฏ",
  "email": "ahmed@clinic.com",
  "password": "password"
}
```

### 4. ุฅุถุงูุฉ ูุฑูุถ

```bash
POST /api/tenant/patients
Headers:
  X-Tenant-ID: clinic_xxx
  Authorization: Bearer {token}
{
  "name": "ูุญูุฏ ุนูู",
  "phone": "0770..."
}
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **Header ูุทููุจ:** ูู ุทูุจ ููุนูุงุฏุฉ ูุญุชุงุฌ `X-Tenant-ID`
2. **Token ุฎุงุต:** ูู ุนูุงุฏุฉ ููุง tokens ูููุตูุฉ
3. **ุงูุจูุงูุงุช ูุนุฒููุฉ:** ูุง ูููู ูุนูุงุฏุฉ ุงููุตูู ูุจูุงูุงุช ุนูุงุฏุฉ ุฃุฎุฑู
4. **ุงูุชุณุฌูู ูููุตู:** ูู ุนูุงุฏุฉ ุชุณุฌู ูุณุชุฎุฏูููุง ุจุดูู ูุณุชูู

---

## ๐ ุงููุซุงุฆู ุงููุงููุฉ

- **ุงูุฏููู ุงูุดุงูู:** `docs/TENANCY_GUIDE_AR.md`
- **ุงููุฑุฌุน ุงูุณุฑูุน:** `docs/TENANCY_QUICK_REFERENCE.md`
- **ููุฎุต ุงูุชูุธูู:** `MIGRATION_CLEANUP_SUMMARY.md`
- **ุงูุนุฑุถ ุงูุชูุถูุญู:** `MULTITENANCY_DEMO.md`

---

**ุงูุชุงุฑูุฎ:** 1 ูุจุฑุงูุฑ 2026  
**ุงูุญุงูุฉ:** โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
